{"ast":null,"code":"import { createStore, createEffect, createEvent } from 'effector';\nexport const loadUsers = createEffect(async () => {\n  const req = await fetch('https://jsonplaceholder.typicode.com/users');\n  if (req.ok) return req.json();else console.log('Something goes wrong...');\n});\nexport const findUser = createEvent();\nexport const addUser = createEvent(); // @ts-ignore\n\nexport const $users = createStore({\n  userList: [],\n  currentUser: {}\n}).on(loadUsers.doneData, (state, payload) => {\n  console.log(payload);\n  return state.userList = payload;\n}).on(findUser, (state, newUser) => // @ts-ignore\nstate.userList.find(user => user.name === newUser.name) ? state.currentUser = newUser : state.currentUser = {}).on(addUser, (state, newUser) => {\n  // @ts-ignore\n  state.userList = [...state.userList, newUser];\n  state.currentUser = newUser;\n});","map":{"version":3,"sources":["/Users/s.shakirova/Desktop/GitHub/device/src/model/users.ts"],"names":["createStore","createEffect","createEvent","loadUsers","req","fetch","ok","json","console","log","findUser","addUser","$users","userList","currentUser","on","doneData","state","payload","newUser","find","user","name"],"mappings":"AAAA,SAASA,WAAT,EAAsBC,YAAtB,EAAoCC,WAApC,QAAuD,UAAvD;AASA,OAAO,MAAMC,SAAS,GAAGF,YAAY,CAAC,YAAY;AAChD,QAAMG,GAAG,GAAG,MAAMC,KAAK,CAAC,4CAAD,CAAvB;AACA,MAAID,GAAG,CAACE,EAAR,EAAY,OAAOF,GAAG,CAACG,IAAJ,EAAP,CAAZ,KACKC,OAAO,CAACC,GAAR,CAAY,yBAAZ;AACN,CAJoC,CAA9B;AAMP,OAAO,MAAMC,QAAQ,GAAGR,WAAW,EAA5B;AACP,OAAO,MAAMS,OAAO,GAAGT,WAAW,EAA3B,C,CAEP;;AACA,OAAO,MAAMU,MAAM,GAAGZ,WAAW,CAAC;AAChCa,EAAAA,QAAQ,EAAE,EADsB;AAEhCC,EAAAA,WAAW,EAAE;AAFmB,CAAD,CAAX,CAInBC,EAJmB,CAIhBZ,SAAS,CAACa,QAJM,EAII,CAACC,KAAD,EAAQC,OAAR,KAAoB;AAC1CV,EAAAA,OAAO,CAACC,GAAR,CAAYS,OAAZ;AACA,SAAOD,KAAK,CAACJ,QAAN,GAAiBK,OAAxB;AACD,CAPmB,EAQnBH,EARmB,CAQhBL,QARgB,EAQN,CAACO,KAAD,EAAQE,OAAR,KACZ;AACAF,KAAK,CAACJ,QAAN,CAAeO,IAAf,CAAqBC,IAAD,IAAUA,IAAI,CAACC,IAAL,KAAcH,OAAO,CAACG,IAApD,IACEL,KAAK,CAACH,WAAN,GAAoBK,OADtB,GACgCF,KAAK,CAACH,WAAN,GAAoB,EAXlC,EAanBC,EAbmB,CAahBJ,OAbgB,EAaP,CAACM,KAAD,EAAQE,OAAR,KAAoB;AAC/B;AACAF,EAAAA,KAAK,CAACJ,QAAN,GAAiB,CAAC,GAAGI,KAAK,CAACJ,QAAV,EAAoBM,OAApB,CAAjB;AACAF,EAAAA,KAAK,CAACH,WAAN,GAAoBK,OAApB;AACD,CAjBmB,CAAf","sourcesContent":["import { createStore, createEffect, createEvent } from 'effector';\n\nexport interface IUser {\n  name: string;\n  password: string;\n  email?: string;\n  phone?: string;\n}\n\nexport const loadUsers = createEffect(async () => {\n  const req = await fetch('https://jsonplaceholder.typicode.com/users');\n  if (req.ok) return req.json();\n  else console.log('Something goes wrong...');\n});\n\nexport const findUser = createEvent<IUser>();\nexport const addUser = createEvent<IUser>();\n\n// @ts-ignore\nexport const $users = createStore({\n  userList: [],\n  currentUser: {}\n})\n  .on(loadUsers.doneData, (state, payload) => {\n    console.log(payload);\n    return state.userList = payload;\n  })\n  .on(findUser, (state, newUser) =>\n    // @ts-ignore\n    state.userList.find((user) => user.name === newUser.name) ?\n      state.currentUser = newUser : state.currentUser = {}\n  )\n  .on(addUser, (state, newUser) => {\n    // @ts-ignore\n    state.userList = [...state.userList, newUser];\n    state.currentUser = newUser;\n  });\n"]},"metadata":{},"sourceType":"module"}