{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { createStore, createEvent } from 'effector';\nimport { useStore } from 'effector-react';\nimport { devices } from '../data/devices';\n;\nconst defaultFilters = {\n  price: {\n    min: 0,\n    max: 5000\n  },\n  colors: ['black', 'white'],\n  bluetooth: true\n};\nexport const changeFilters = createEvent();\nexport const $filters = createStore(defaultFilters).on(changeFilters, (_, payload) => payload);\nexport const filterProducts = createEvent();\nexport const sortByLowerPrice = createEvent();\nexport const sortByHigherPrice = createEvent();\nexport const sortByNovelty = createEvent();\nexport const $catalog = _s(createStore(devices).on(filterProducts, _s(products => {\n  _s();\n\n  const currentFilters = useStore($filters);\n  products.filter(product => {\n    if (product.price < currentFilters.price.min) return false;\n    if (product.price > currentFilters.price.max) return false;\n    if (product.bluetooth !== currentFilters.bluetooth) return false; // будущая проверка списка цветов\n\n    return true;\n  });\n}, \"b0P20AvdwiMW7SpGfDLwi+T8mpI=\", false, function () {\n  return [useStore];\n})), \"b0P20AvdwiMW7SpGfDLwi+T8mpI=\", false, function () {\n  return [useStore];\n}).on(sortByLowerPrice, products => [...products].sort((a, b) => a.price - b.price)).on(sortByHigherPrice, products => [...products].sort((a, b) => b.price - a.price)).on(sortByNovelty, products => [...products].sort((a, b) => a.isNew ? 0 : b.isNew ? 1 : -1));","map":{"version":3,"sources":["/Users/s.shakirova/Desktop/GitHub/device/src/model/catalog.ts"],"names":["createStore","createEvent","useStore","devices","defaultFilters","price","min","max","colors","bluetooth","changeFilters","$filters","on","_","payload","filterProducts","sortByLowerPrice","sortByHigherPrice","sortByNovelty","$catalog","products","currentFilters","filter","product","sort","a","b","isNew"],"mappings":";;AAAA,SAASA,WAAT,EAAsBC,WAAtB,QAAyC,UAAzC;AACA,SAASC,QAAT,QAAyB,gBAAzB;AACA,SAASC,OAAT,QAAiC,iBAAjC;AASC;AAED,MAAMC,cAA8B,GAAG;AACrCC,EAAAA,KAAK,EAAE;AACLC,IAAAA,GAAG,EAAE,CADA;AAELC,IAAAA,GAAG,EAAE;AAFA,GAD8B;AAKrCC,EAAAA,MAAM,EAAE,CAAC,OAAD,EAAU,OAAV,CAL6B;AAMrCC,EAAAA,SAAS,EAAE;AAN0B,CAAvC;AASA,OAAO,MAAMC,aAAa,GAAGT,WAAW,EAAjC;AACP,OAAO,MAAMU,QAAQ,GAAGX,WAAW,CAACI,cAAD,CAAX,CACrBQ,EADqB,CAClBF,aADkB,EACH,CAACG,CAAD,EAAIC,OAAJ,KAAgBA,OADb,CAAjB;AAGP,OAAO,MAAMC,cAAc,GAAGd,WAAW,EAAlC;AACP,OAAO,MAAMe,gBAAgB,GAAGf,WAAW,EAApC;AACP,OAAO,MAAMgB,iBAAiB,GAAGhB,WAAW,EAArC;AACP,OAAO,MAAMiB,aAAa,GAAGjB,WAAW,EAAjC;AAEP,OAAO,MAAMkB,QAAQ,GAAG,GAAAnB,WAAW,CAAYG,OAAZ,CAAX,CACrBS,EADqB,CAClBG,cADkB,KACDK,QAAD,IAAc;AAAA;;AAChC,QAAMC,cAAc,GAAGnB,QAAQ,CAACS,QAAD,CAA/B;AACAS,EAAAA,QAAQ,CAACE,MAAT,CAAiBC,OAAD,IAAa;AAC3B,QAAIA,OAAO,CAAClB,KAAR,GAAgBgB,cAAc,CAAChB,KAAf,CAAqBC,GAAzC,EAA8C,OAAO,KAAP;AAC9C,QAAIiB,OAAO,CAAClB,KAAR,GAAgBgB,cAAc,CAAChB,KAAf,CAAqBE,GAAzC,EAA8C,OAAO,KAAP;AAC9C,QAAIgB,OAAO,CAACd,SAAR,KAAsBY,cAAc,CAACZ,SAAzC,EAAoD,OAAO,KAAP,CAHzB,CAK3B;;AAEA,WAAO,IAAP;AACD,GARD;AASD,CAZqB;AAAA,UAEGP,QAFH;AAAA;AAAA,UAEGA,QAFH;AAAA,GAarBU,EAbqB,CAalBI,gBAbkB,EAaCI,QAAD,IAAc,CAAC,GAAGA,QAAJ,EAAcI,IAAd,CAAmB,CAACC,CAAD,EAAIC,CAAJ,KAAUD,CAAC,CAACpB,KAAF,GAAUqB,CAAC,CAACrB,KAAzC,CAbd,EAcrBO,EAdqB,CAclBK,iBAdkB,EAcEG,QAAD,IAAc,CAAC,GAAGA,QAAJ,EAAcI,IAAd,CAAmB,CAACC,CAAD,EAAIC,CAAJ,KAAUA,CAAC,CAACrB,KAAF,GAAUoB,CAAC,CAACpB,KAAzC,CAdf,EAerBO,EAfqB,CAelBM,aAfkB,EAeFE,QAAD,IAAc,CAAC,GAAGA,QAAJ,EAAcI,IAAd,CAAmB,CAACC,CAAD,EAAIC,CAAJ,KAAUD,CAAC,CAACE,KAAF,GAAU,CAAV,GAAcD,CAAC,CAACC,KAAF,GAAU,CAAV,GAAc,CAAC,CAA1D,CAfX,CAAjB","sourcesContent":["import { createStore, createEvent } from 'effector';\nimport { useStore } from 'effector-react';\nimport { devices, IDevice } from '../data/devices';\n\ninterface IFiltersToSend {\n  price: {\n    min: number;\n    max: number;\n  };\n  colors: string[];\n  bluetooth: boolean;\n};\n\nconst defaultFilters: IFiltersToSend = {\n  price: {\n    min: 0,\n    max: 5000,\n  },\n  colors: ['black', 'white'],\n  bluetooth: true,\n};\n\nexport const changeFilters = createEvent<IFiltersToSend>();\nexport const $filters = createStore(defaultFilters)\n  .on(changeFilters, (_, payload) => payload);\n\nexport const filterProducts = createEvent();\nexport const sortByLowerPrice = createEvent();\nexport const sortByHigherPrice = createEvent();\nexport const sortByNovelty = createEvent();\n\nexport const $catalog = createStore<IDevice[]>(devices)\n  .on(filterProducts, (products) => {\n    const currentFilters = useStore($filters);\n    products.filter((product) => {\n      if (product.price < currentFilters.price.min) return false;\n      if (product.price > currentFilters.price.max) return false;\n      if (product.bluetooth !== currentFilters.bluetooth) return false;\n\n      // будущая проверка списка цветов\n\n      return true;\n    })\n  })\n  .on(sortByLowerPrice, (products) => [...products].sort((a, b) => a.price - b.price))\n  .on(sortByHigherPrice, (products) => [...products].sort((a, b) => b.price - a.price))\n  .on(sortByNovelty, (products) => [...products].sort((a, b) => a.isNew ? 0 : b.isNew ? 1 : -1));\n"]},"metadata":{},"sourceType":"module"}